# Как сделать приложение для Telegram и открыть на телефоне

Игра уже готова как веб-приложение. Чтобы открывать её в Telegram на телефоне, нужно: (1) выложить игру в интернет по HTTPS и (2) привязать ссылку к боту в Telegram.

---

## Шаг 1. Собрать проект

В папке проекта в терминале:

```bash
npm run build
```

В папке `dist/` появятся готовые файлы для размещения в интернете.

---

## Шаг 2. Разместить игру в интернете (HTTPS)

Telegram открывает только сайты по **HTTPS**. Подойдёт любой бесплатный хостинг.

### Вариант A: Vercel (удобно и быстро)

1. Зарегистрируйтесь на [vercel.com](https://vercel.com) (можно через GitHub).
2. Установите Vercel CLI: `npm i -g vercel`.
3. В папке проекта выполните:
   ```bash
   npm run build
   vercel
   ```
4. Следуйте подсказкам (логин, проект, папка `dist` или корень с настройкой Build Output Directory = `dist`).
5. Vercel выдаст ссылку вида: `https://ваш-проект.vercel.app` — это и есть адрес игры.

**Важно:** в настройках проекта (Project Settings) укажите:
- **Build Command:** `npm run build`
- **Output Directory:** `dist`
- **Install Command:** `npm install`

### Вариант B: Netlify

1. Зарегистрируйтесь на [netlify.com](https://netlify.com).
2. Перетащите папку `dist` в окно Netlify Drop на сайте — получите ссылку вида `https://random-name.netlify.app`.
3. Либо подключите репозиторий GitHub и укажите: Build command: `npm run build`, Publish directory: `dist`.

### Вариант C: GitHub Pages

1. В `vite.config.js` добавьте в `export default defineConfig({...})`:
   ```js
   base: '/имя-репозитория/',  // например base: '/WebGamePrototype/'
   ```
2. Соберите: `npm run build`.
3. В репозитории: Settings → Pages → Source: Deploy from a branch → папка `dist` или используйте действие GitHub Actions для Vite.
4. Сайт будет по адресу: `https://ваш-username.github.io/имя-репозитория/`.

Запомните итоговый **HTTPS-адрес** игры — он понадобится для бота.

---

## Шаг 3. Создать бота в Telegram

1. Откройте Telegram и найдите **@BotFather**.
2. Отправьте команду: `/newbot`.
3. Введите имя бота (например: `Dungeon Raid Game`) и username (например: `MyDungeonRaidBot`).
4. BotFather пришлёт **токен** вида `123456789:ABCdef...` — его можно не сохранять для простого запуска игры, но не показывайте посторонним.
5. Бот создан. Его можно открыть по ссылке: `https://t.me/MyDungeonRaidBot` (подставьте свой username).

---

## Шаг 4. Привязать игру к боту (Web App)

Нужно сделать так, чтобы при нажатии кнопки в боте открывалась ваша игра по ссылке из шага 2.

### Способ 1: Кнопка меню (рекомендуется)

1. В Telegram откройте **@BotFather**.
2. Отправьте: `/mybots`.
3. Выберите вашего бота.
4. Нажмите **Bot Settings** → **Menu Button** → **Configure menu button**.
5. В поле **URL** введите **полный HTTPS-адрес** вашей игры (например `https://ваш-проект.vercel.app`).
6. В поле **Menu button text** введите, например: `Играть`.

Теперь при открытии бота внизу будет кнопка **«Играть»** (или ваш текст). Нажатие откроет игру в полноэкранном окне Telegram — в том числе на телефоне.

### Способ 2: Команда /app или кнопка в чате

- В BotFather можно настроить команду, которая открывает Web App.
- Либо отправить пользователю в чате кнопку (InlineKeyboard) с `url` или `web_app` на ваш HTTPS-адрес — тогда по нажатию откроется игра.

Для начала достаточно **Способа 1** (Menu Button).

---

## Шаг 5. Открыть игру на телефоне

1. На телефоне откройте Telegram.
2. В поиске найдите вашего бота (по username, например `@MyDungeonRaidBot`) или перейдите по ссылке `https://t.me/MyDungeonRaidBot`.
3. Нажмите **Start** или просто откройте чат с ботом.
4. Внизу нажмите кнопку меню (например **«Играть»**).
5. Откроется ваша игра в окне Telegram — можно играть.

Если кнопки меню нет, проверьте в BotFather, что в **Menu Button** указан именно ваш HTTPS-адрес из шага 2.

---

## Краткая схема

```
[Собрать: npm run build]
        ↓
[Выложить dist на Vercel/Netlify/GitHub Pages] → получить https://ваш-адрес
        ↓
[BotFather: создать бота → Menu Button → URL = https://ваш-адрес]
        ↓
[В Telegram на телефоне: открыть бота → нажать кнопку меню] → игра открывается
```

---

## Если игра не открывается в Telegram

- Убедитесь, что адрес в Menu Button начинается с **https://** и открывается в обычном браузере.
- Проверьте, что после `npm run build` вы загрузили именно папку **dist** (или настроили хостинг на неё).
- На телефоне обновите чат с ботом или перезапустите Telegram.

В коде уже подключена инициализация Telegram Web App (`@twa-dev/sdk`): при открытии в Telegram приложение разворачивается на весь экран и помечается как готовое.
